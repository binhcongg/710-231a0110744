<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BÃ i 3: Game ÄoÃ¡n Sá»‘</title>
    <style>
        
/* BÃ i 3: Game ÄoÃ¡n Sá»‘ */
.guess-game-container {
    width: 90%;
    max-width: 400px;
    margin: 50px auto;
    padding: 20px;
    border: 1px solid #ddd;
    border-radius: 8px;
    text-align: center;
    position: relative; /* Quan trá»ng cho Confetti */
    overflow: hidden; /* Quan trá»ng Ä‘á»ƒ confetti khÃ´ng gÃ¢y cuá»™n */
}

.input-group {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-bottom: 20px;
}

#guessInput {
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    width: 150px;
    text-align: center;
    font-size: 16px;
}

#submitGuessBtn, #newGameBtn {
    padding: 10px 15px;
    background-color: #28a745;
    color: white;
    border: none;
    cursor: pointer;
    border-radius: 4px;
    font-size: 16px;
}

.message {
    font-size: 1.2em;
    font-weight: bold;
    margin: 15px 0;
    min-height: 24px;
}

/* --- Confetti Animation CSS --- */
.confetti-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none; /* KhÃ´ng cháº·n click vÃ o nÃºt */
    z-index: 999;
}

.confetti {
    position: absolute;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    opacity: 0;
    /* Ãp dá»¥ng animation vá»›i thá»i gian vÃ  hÃ m easing */
    animation: confetti-fall 3s ease-in forwards;
}

/* Keyframes Ä‘á»‹nh nghÄ©a chuyá»ƒn Ä‘á»™ng */
@keyframes confetti-fall {
    0% { 
        transform: translate(var(--x-start), var(--y-start)) rotate(0deg); 
        opacity: 1; 
    }
    100% { 
        /* Dá»‹ch chuyá»ƒn vÃ  xoay, y-axis Ä‘i xuá»‘ng 100vh */
        transform: translate(var(--x-end), 100vh) rotate(720deg); 
        opacity: 0; 
    }
}

    </style>
</head>
<body>
    <div class="guess-game-container" id="guessGame">
        <h2>ğŸ² Game ÄoÃ¡n Sá»‘ (1-100)</h2>
        <p>TÃ´i Ä‘Ã£ chá»n má»™t sá»‘ bÃ­ máº­t. HÃ£y nháº­p Ä‘oÃ¡n cá»§a báº¡n:</p>
        <div class="input-group">
            <input type="number" id="guessInput" min="1" max="100" placeholder="Nháº­p sá»‘ Ä‘oÃ¡n (1-100)">
            <button id="submitGuessBtn">ÄoÃ¡n</button>
        </div>
        
        <p id="message" class="message">Báº¯t Ä‘áº§u trÃ² chÆ¡i má»›i!</p>
        <p>Sá»‘ láº§n thá»­: <span id="countDisplay">0</span></p>
        
        <button id="newGameBtn" style="display: none; margin-top: 15px;">ChÆ¡i Láº¡i</button>

        <div class="confetti-container" id="confettiContainer"></div>
    </div>

    <script src="js/script.js"></script>
    <script>
        

// BÃ i 3: Game ÄoÃ¡n Sá»‘
let secretNumber;
let attempts;
let gameActive = true; // Biáº¿n kiá»ƒm soÃ¡t tráº¡ng thÃ¡i game

// 1. Logic generate random (1-100)
const generateRandomNumber = () => {
    // Math.random() [0, 1) * 100 = [0, 100)
    // Math.floor(...) = [0, 99]
    // + 1 = [1, 100]
    return Math.floor(Math.random() * 100) + 1;
};

// Khá»Ÿi táº¡o trÃ² chÆ¡i
const startNewGame = () => {
    secretNumber = generateRandomNumber();
    attempts = 0;
    gameActive = true;

    // Reset UI
    document.getElementById('guessInput').value = '';
    document.getElementById('message').textContent = 'Báº¯t Ä‘áº§u Ä‘oÃ¡n nÃ o!';
    document.getElementById('countDisplay').textContent = attempts;
    document.getElementById('submitGuessBtn').disabled = false;
    document.getElementById('newGameBtn').style.display = 'none';
    document.getElementById('confettiContainer').innerHTML = ''; // XÃ³a confetti cÅ©
    document.getElementById('guessInput').focus(); // Tá»± Ä‘á»™ng focus vÃ o input
    
    // Console log sá»‘ bÃ­ máº­t (chá»‰ cho má»¥c Ä‘Ã­ch kiá»ƒm tra)
    console.log('Sá»‘ bÃ­ máº­t (DEBUG):', secretNumber); 
};

// Hiá»ƒn thá»‹ Confetti Animation
const triggerConfetti = (count) => {
    const container = document.getElementById('confettiContainer');
    // Danh sÃ¡ch mÃ u ngáº«u nhiÃªn
    const colors = ['#f00', '#0f0', '#00f', '#ff0', '#f0f', '#0ff', '#f90', '#09f'];

    for (let i = 0; i < count; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        
        // Ngáº«u nhiÃªn vá»‹ trÃ­ báº¯t Ä‘áº§u (tá»« trÃªn xuá»‘ng, tráº£i rá»™ng)
        const xStart = Math.random() * 100 + 'vw';
        const yStart = Math.random() * -50 + 'px'; // Báº¯t Ä‘áº§u tá»« ngoÃ i mÃ n hÃ¬nh phÃ­a trÃªn
        
        // Ngáº«u nhiÃªn vá»‹ trÃ­ káº¿t thÃºc (rÆ¡i rá»™ng hÆ¡n)
        const xEnd = Math.random() * 200 - 50 + 'vw'; 

        // GÃ¡n mÃ u vÃ  biáº¿n CSS
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.setProperty('--x-start', xStart);
        confetti.style.setProperty('--y-start', yStart);
        confetti.style.setProperty('--x-end', xEnd);

        container.appendChild(confetti);
        
        // Tá»‘i Æ°u DOM: XÃ³a confetti sau khi animation káº¿t thÃºc
        setTimeout(() => confetti.remove(), 3000); 
    }
};

// Xá»­ lÃ½ logic Ä‘oÃ¡n
const checkGuess = () => {
    if (!gameActive) return;

    const inputElement = document.getElementById('guessInput');
    
    // 2. Logic xá»­ lÃ½ input Ä‘á»ƒ trÃ¡nh lá»—i (validation)
    const guess = parseInt(inputElement.value);
    
    // Kiá»ƒm tra Ä‘áº§u vÃ o (validation)
    if (isNaN(guess) || guess < 1 || guess > 100) {
        document.getElementById('message').textContent = 'âš ï¸ Vui lÃ²ng nháº­p má»™t sá»‘ nguyÃªn há»£p lá»‡ tá»« 1 Ä‘áº¿n 100.';
        inputElement.value = ''; 
        inputElement.focus();
        return; // Dá»«ng hÃ m náº¿u input lá»—i
    }

    attempts++;
    document.getElementById('countDisplay').textContent = attempts;

    let message = '';
    
    if (guess === secretNumber) {
        message = `ğŸ‰ CHÃšC Má»ªNG! Báº¡n Ä‘Ã£ Ä‘oÃ¡n Ä‘Ãºng sá»‘ ${secretNumber} sau ${attempts} láº§n thá»­!`;
        gameActive = false; // Ngá»«ng game
        document.getElementById('submitGuessBtn').disabled = true;
        document.getElementById('newGameBtn').style.display = 'block';
        
        // KÃ­ch hoáº¡t Confetti
        triggerConfetti(50);
    } else if (guess < secretNumber) {
        message = 'QuÃ¡ tháº¥p! Thá»­ láº¡i.';
    } else {
        message = 'QuÃ¡ cao! Thá»­ láº¡i.';
    }

    document.getElementById('message').textContent = message;
    inputElement.value = ''; // XÃ³a input sau khi Ä‘oÃ¡n
    inputElement.focus();
};

// Khá»Ÿi táº¡o Game
function initGuessGame() {
    startNewGame();

    const submitBtn = document.getElementById('submitGuessBtn');
    const newGameBtn = document.getElementById('newGameBtn');
    const inputElement = document.getElementById('guessInput');

    if (submitBtn) {
        submitBtn.addEventListener('click', checkGuess);
    }
    if (newGameBtn) {
        newGameBtn.addEventListener('click', startNewGame);
    }
    if (inputElement) {
        inputElement.addEventListener('keypress', (e) => {
            // Cho phÃ©p ngÆ°á»i dÃ¹ng nháº¥n Enter Ä‘á»ƒ Ä‘oÃ¡n
            if (e.key === 'Enter') {
                checkGuess();
            }
        });
    }
}
        // Khá»Ÿi táº¡o Game khi trang táº£i xong
        window.addEventListener('load', initGuessGame);
    </script>
</body>
</html>
